<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIELIT Professional Exam Portal | Kaushal Institute</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { background-color: #f1f5f9; font-family: 'Inter', sans-serif; height: 100vh; overflow: hidden; }
        .nav-blue { background: #1e3a8a; }
        .q-btn { width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 4px; font-size: 12px; font-weight: 600; border: 1px solid #cbd5e1; cursor: pointer; transition: 0.2s; }
        .q-answered { background: #22c55e !important; color: white; border-color: #16a34a; }
        .q-current { border: 2px solid #1e3a8a; box-shadow: 0 0 10px rgba(30,58,138,0.3); }
        .option-card { border: 2px solid #e2e8f0; border-radius: 12px; padding: 15px; text-align: left; transition: 0.2s; background: white; width: 100%; }
        .option-card.active { border-color: #3b82f6; background: #eff6ff; }
        .hide { display: none !important; }
    </style>
</head>
<body class="flex flex-col">

    <nav class="nav-blue text-white py-3 px-6 flex justify-between items-center shadow-md">
        <div class="flex items-center gap-2">
            <i class="fas fa-shield-halved text-orange-400"></i>
            <span class="font-bold tracking-wider uppercase">NIELIT Exam Portal - Kaushal Institute</span>
        </div>
        <div id="timer" class="bg-red-600 px-4 py-1 rounded font-mono text-lg font-bold">00:00</div>
    </nav>

    <main class="flex-1 overflow-hidden flex flex-col items-center justify-center p-4">
        
        <div id="welcome-screen" class="bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center">
            <h2 class="text-2xl font-bold mb-6">Student Login</h2>
            <input type="text" id="student-name" placeholder="Apna Naam Likhein" class="w-full p-3 border rounded-lg mb-4 outline-none focus:ring-2 focus:ring-blue-500">
            <button onclick="initApp()" class="w-full bg-blue-700 text-white py-3 rounded-lg font-bold hover:bg-blue-800">Enter Dashboard</button>
        </div>

        <div id="dashboard" class="hide grid grid-cols-1 md:grid-cols-2 gap-4 max-w-4xl w-full">
            <button onclick="loadModule('M1')" class="bg-white p-6 rounded-xl shadow hover:shadow-lg text-left border-l-4 border-blue-600">
                <h3 class="font-bold text-lg text-blue-800">M1-R5: IT Tools</h3>
                <p class="text-sm text-gray-500">LibreOffice & OS</p>
            </button>
            <button onclick="loadModule('M2')" class="bg-white p-6 rounded-xl shadow hover:shadow-lg text-left border-l-4 border-green-600">
                <h3 class="font-bold text-lg text-green-800">M2-R5: Web Design</h3>
                <p class="text-sm text-gray-500">HTML, CSS, JS</p>
            </button>
        </div>

        <div id="exam-ui" class="hide w-full max-w-6xl h-full flex gap-4 overflow-hidden py-4">
            <div class="flex-1 bg-white rounded-xl shadow-lg flex flex-col overflow-hidden">
                <div class="p-4 border-b bg-gray-50 font-bold flex justify-between">
                    <span id="module-label">M1 Practice</span>
                    <span id="q-number-title" class="text-blue-700">Question 1</span>
                </div>
                <div class="flex-1 p-8 overflow-y-auto">
                    <h2 id="question-text" class="text-xl font-semibold text-gray-800 mb-8"></h2>
                    <div id="options-container" class="space-y-4"></div>
                </div>
                <div class="p-4 border-t flex justify-between bg-gray-50">
                    <button onclick="prevQ()" class="bg-gray-200 px-6 py-2 rounded font-bold hover:bg-gray-300">Previous</button>
                    <div>
                        <button onclick="nextQ()" id="btn-next" class="bg-blue-600 text-white px-8 py-2 rounded font-bold hover:bg-blue-700">Next</button>
                        <button onclick="submitExam()" id="btn-submit" class="hide bg-green-600 text-white px-8 py-2 rounded font-bold hover:bg-green-700">Submit Exam</button>
                    </div>
                </div>
            </div>

            <div class="w-72 bg-white rounded-xl shadow-lg p-4 flex flex-col">
                <h4 class="font-bold mb-4 border-b pb-2">Question Palette</h4>
                <div id="palette" class="flex flex-wrap gap-2 overflow-y-auto content-start flex-1"></div>
                <div class="mt-4 pt-4 border-t text-xs space-y-2">
                    <div class="flex items-center gap-2"><span class="w-3 h-3 bg-green-500 rounded"></span> Answered</div>
                    <div class="flex items-center gap-2"><span class="w-3 h-3 bg-white border border-gray-400 rounded"></span> Not Visited</div>
                </div>
            </div>
        </div>

        <div id="result-screen" class="hide w-full max-w-4xl bg-white rounded-2xl shadow-2xl p-8 overflow-y-auto max-h-full">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold">Exam Result Summary</h1>
                <p id="res-name" class="text-blue-600 font-bold mt-2"></p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
                <div class="bg-blue-50 p-4 rounded text-center">
                    <p class="text-xs text-gray-500">SCORE</p>
                    <p id="res-score" class="text-2xl font-bold"></p>
                </div>
                <div class="bg-blue-50 p-4 rounded text-center">
                    <p class="text-xs text-gray-500">PERCENTAGE</p>
                    <p id="res-percent" class="text-2xl font-bold"></p>
                </div>
                <div class="bg-blue-50 p-4 rounded text-center border-2 border-blue-200">
                    <p class="text-xs text-gray-500">GRADE</p>
                    <p id="res-grade" class="text-3xl font-black text-blue-800"></p>
                </div>
                <div class="bg-blue-50 p-4 rounded text-center">
                    <p class="text-xs text-gray-500">STATUS</p>
                    <p id="res-status" class="text-lg font-bold"></p>
                </div>
            </div>

            <h3 class="font-bold text-lg mb-4 border-b pb-2">Incorrect Answers Analysis:</h3>
            <div id="incorrect-list" class="space-y-4 mb-8 text-sm"></div>

            <button onclick="location.reload()" class="w-full bg-blue-700 text-white py-4 rounded font-bold">Restart Another Test</button>
        </div>

    </main>

    <script>
        let questions = [];
        let userAnswers = {};
        let cursor = 0;
        let sName = "";

        function initApp() {
            sName = document.getElementById('student-name').value;
            if(!sName) return alert("Naam zaroori hai!");
            document.getElementById('welcome-screen').classList.add('hide');
            document.getElementById('dashboard').classList.remove('hide');
        }

        async function loadModule(m) {
            try {
                const res = await fetch('Questions.json');
                const data = await res.json();
                questions = data[m].sort(() => 0.5 - Math.random()).slice(0, 50);
                document.getElementById('dashboard').classList.add('hide');
                document.getElementById('exam-ui').classList.remove('hide');
                buildPalette();
                renderQ();
            } catch(e) { alert("JSON Load Error!"); }
        }

        function buildPalette() {
            const p = document.getElementById('palette');
            p.innerHTML = '';
            questions.forEach((_, i) => {
                const b = document.createElement('div');
                b.className = `q-btn q-${i}`;
                b.innerText = i + 1;
                b.onclick = () => jumpTo(i);
                p.appendChild(b);
            });
        }

        function renderQ() {
            const q = questions[cursor];
            document.getElementById('q-number-title').innerText = `Question ${cursor + 1} of ${questions.length}`;
            document.getElementById('question-text').innerText = q.question;
            
            const box = document.getElementById('options-container');
            box.innerHTML = '';
            
            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = `option-card ${userAnswers[cursor] === opt ? 'active' : ''}`;
                btn.innerText = opt;
                btn.onclick = () => {
                    userAnswers[cursor] = opt;
                    document.querySelector(`.q-${cursor}`).classList.add('q-answered');
                    renderQ();
                };
                box.appendChild(btn);
            });

            // Palette Highlights
            document.querySelectorAll('.q-btn').forEach(b => b.classList.remove('q-current'));
            document.querySelector(`.q-${cursor}`).classList.add('q-current');

            // Button Toggle
            document.getElementById('btn-next').classList.toggle('hide', cursor === questions.length - 1);
            document.getElementById('btn-submit').classList.toggle('hide', cursor !== questions.length - 1);
        }

        function nextQ() { if(cursor < questions.length - 1) { cursor++; renderQ(); } }
        function prevQ() { if(cursor > 0) { cursor--; renderQ(); } }
        function jumpTo(i) { cursor = i; renderQ(); }

        function submitExam() {
            if(!confirm("Kya aap exam khatam karna chahte hain?")) return;
            showResults();
        }

        function getGrade(p) {
            if(p >= 85) return 'S';
            if(p >= 75) return 'A';
            if(p >= 65) return 'B';
            if(p >= 55) return 'C';
            if(p >= 50) return 'D';
            return 'F';
        }

        function showResults() {
            document.getElementById('exam-ui').classList.add('hide');
            document.getElementById('result-screen').classList.remove('hide');
            
            let correctCount = 0;
            let incorrectHTML = '';

            questions.forEach((q, i) => {
                const uAns = userAnswers[i] || "Not Attempted";
                if(uAns === q.answer) {
                    correctCount++;
                } else {
                    incorrectHTML += `
                        <div class="p-3 border-l-4 border-red-500 bg-red-50 rounded">
                            <p class="font-bold">Q${i+1}: ${q.question}</p>
                            <p class="text-red-600">Your Answer: ${uAns}</p>
                            <p class="text-green-600 font-bold">Correct Answer: ${q.answer}</p>
                        </div>
                    `;
                }
            });

            const percent = Math.round((correctCount / questions.length) * 100);
            document.getElementById('res-name').innerText = sName;
            document.getElementById('res-score').innerText = `${correctCount} / ${questions.length}`;
            document.getElementById('res-percent').innerText = `${percent}%`;
            document.getElementById('res-grade').innerText = getGrade(percent);
            document.getElementById('res-status').innerText = percent >= 50 ? "QUALIFIED" : "NOT QUALIFIED";
            document.getElementById('res-status').className = percent >= 50 ? "text-green-600 font-bold" : "text-red-600 font-bold";
            document.getElementById('incorrect-list').innerHTML = incorrectHTML || "<p class='text-green-600'>Wow! No incorrect answers.</p>";
        }
    </script>
</body>
</html>
